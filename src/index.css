@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== Basics ===== */
/* === Global anti-horizontal scroll === */
html,
body,
#root {
  overflow-x: hidden;
  width: 100%;
}
* {
  box-sizing: border-box;
}
html {
  scroll-behavior: smooth;
}
body {
  @apply bg-base-100 text-base-content;
}
.container {
  @apply max-w-7xl mx-auto px-4;
}

@layer base {
  h1,
  h2,
  h3 {
    font-family: theme("fontFamily.display");
  }
}
h1 {
  @apply text-4xl sm:text-5xl md:text-6xl font-extrabold;
}
h2 {
  @apply text-3xl sm:text-4xl md:text-5xl font-extrabold;
}
h3 {
  @apply text-2xl sm:text-3xl font-bold;
}

/* ===== Utilities ===== */
@layer utilities {
  :root {
    --grid-size: 18px; /* گرید ریزتر */
    --grid-size-soft: 36px; /* گرید نرم (×2) */
  }

  .hero-mask-90 {
    pointer-events: none;
    -webkit-mask-image: radial-gradient(
      120% 95% at 50% 45%,
      #000 0%,
      #000 65%,
      transparent 92%
    );
    mask-image: radial-gradient(
      120% 95% at 50% 45%,
      #000 0%,
      #000 65%,
      transparent 92%
    );
  }

  /* Plain base */
  .hero-plain {
    position: absolute;
    inset: 0;
    pointer-events: none;
    background: radial-gradient(
      circle at 50% 45%,
      rgba(255, 255, 255, 0.35) 0%,
      rgba(255, 255, 255, 0.24) 40%,
      rgba(255, 255, 255, 0.14) 100%
    );
  }
  [data-theme="dark"] .hero-plain {
    background: radial-gradient(
      circle at 50% 45%,
      rgba(10, 16, 28, 0.72) 0%,
      rgba(10, 16, 28, 0.66) 40%,
      rgba(10, 16, 28, 0.6) 100%
    );
  }

  /* Bleed (blue glow) */
  .hero-bleed {
    position: absolute;
    inset: 0;
    pointer-events: none;
  }
  [data-theme="light"] .hero-bleed {
    background: radial-gradient(
      60% 40% at 50% 15%,
      rgba(125, 169, 255, 0.05),
      transparent 70%
    );
    mix-blend-mode: screen;
  }
  [data-theme="dark"] .hero-bleed {
    background: radial-gradient(
      60% 40% at 50% 18%,
      rgba(100, 160, 255, 0.1),
      transparent 70%
    );
    mix-blend-mode: screen;
  }

  /* Grid layers */
  .hero-grid,
  .hero-grid-soft {
    position: absolute;
    inset: 0;
    pointer-events: none;
    background-position: 0 0;
  }
  .hero-grid {
    background-size: var(--grid-size) var(--grid-size);
  }
  .hero-grid-soft {
    background-size: var(--grid-size-soft) var(--grid-size-soft);
  }

  /* Lines color */
  [data-theme="light"] .hero-grid,
  [data-theme="light"] .hero-grid-soft {
    background-image: linear-gradient(
        rgba(0, 0, 0, 0.28) 1px,
        rgba(0, 0, 0, 0) 1px
      ),
      linear-gradient(90deg, rgba(0, 0, 0, 0.28) 1px, rgba(0, 0, 0, 0) 1px);
  }
  [data-theme="dark"] .hero-grid,
  [data-theme="dark"] .hero-grid-soft {
    background-image: linear-gradient(
        rgba(170, 200, 255, 0.12) 1px,
        rgba(0, 0, 0, 0) 1px
      ),
      linear-gradient(
        90deg,
        rgba(170, 200, 255, 0.12) 1px,
        rgba(0, 0, 0, 0) 1px
      );
  }

  /* Global opacity balance (Light OK؛ Dark شفاف‌تر طبق خواسته‌ات) */
  .hero-grid {
    opacity: 0.28;
  } /* Light */
  .hero-grid-soft {
    opacity: 0.34;
  } /* Light */
  [data-theme="dark"] .hero-grid {
    opacity: 0.14;
  } /* was 0.20 */
  [data-theme="dark"] .hero-grid-soft {
    opacity: 0.18;
  } /* was 0.26 */

  /* Grid fade (oval mask – بالا/پایین محوتر) */
  .grid-fade {
    -webkit-mask-image: radial-gradient(
      82% 56% at 50% 46%,
      rgba(0, 0, 0, 1) 45%,
      rgba(0, 0, 0, 0.45) 68%,
      rgba(0, 0, 0, 0) 86%
    );
    mask-image: radial-gradient(
      82% 56% at 50% 46%,
      rgba(0, 0, 0, 1) 45%,
      rgba(0, 0, 0, 0.45) 68%,
      rgba(0, 0, 0, 0) 86%
    );
  }

  /* Highlight (center light) */
  .hero-highlight {
    position: absolute;
    inset: 0;
    pointer-events: none;
  }
  [data-theme="light"] .hero-highlight {
    background: radial-gradient(
      circle at 50% 42%,
      rgba(255, 255, 255, 0.22),
      transparent 72%
    );
  }
  [data-theme="dark"] .hero-highlight {
    background: radial-gradient(
      circle at 50% 42%,
      rgba(255, 255, 255, 0.12),
      transparent 72%
    );
  }

  /* Shadow / depth */
  .hero-shadow {
    position: absolute;
    inset: -6% -4% -10% -4%;
    pointer-events: none;
    background: radial-gradient(
        70% 46% at 50% 40%,
        rgba(0, 0, 0, 0.3),
        transparent 68%
      ),
      radial-gradient(85% 58% at 50% 48%, rgba(0, 0, 0, 0.18), transparent 72%);
    mix-blend-mode: multiply;
  }
  [data-theme="dark"] .hero-shadow {
    background: radial-gradient(
        70% 46% at 50% 40%,
        rgba(0, 0, 0, 0.42),
        transparent 68%
      ),
      radial-gradient(85% 58% at 50% 48%, rgba(0, 0, 0, 0.28), transparent 72%);
  }

  /* Top fade */
  .hero-topfade {
    position: absolute;
    inset: 0;
    pointer-events: none;
  }
  [data-theme="light"] .hero-topfade {
    background: linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.38),
      rgba(255, 255, 255, 0) 28%
    );
  }
  [data-theme="dark"] .hero-topfade {
    background: linear-gradient(
      180deg,
      rgba(4, 6, 10, 0.5),
      rgba(0, 0, 0, 0) 32%
    );
  }

  /* Vignette edges */
  .hero-vignette {
    position: absolute;
    inset: -12% -8% -24% -8%;
    pointer-events: none;
  }
  [data-theme="light"] .hero-vignette {
    background: radial-gradient(
      60% 40% at 50% 10%,
      rgba(0, 0, 0, 0.14),
      transparent 58%
    );
  }
  [data-theme="dark"] .hero-vignette {
    background: radial-gradient(
      60% 40% at 50% 10%,
      rgba(0, 0, 0, 0.36),
      transparent 58%
    );
  }

  /* Compact hero tweaks (اختیاری) */
  .hero-compact h1 {
    line-height: 1.15;
  }
  .hero-compact .badge {
    transform: translateY(0);
  }

  /* Mobile tweak: کمی بزرگ‌تر شدن گرید تا پیکسلی نشه */
  @media (max-width: 480px) {
    :root {
      --grid-size: 20px;
      --grid-size-soft: 40px;
    }
  }
}

/* ===== Mobile-specific transparency at TOP (both themes) ===== */
/* رو موبایل، بالای هیرو شفاف‌تر: ویدیو بیشتر دیده میشه */
@media (max-width: 640px) {
  /* گرید کمی محوتر برای عبور ویدیو */
  .hero-grid {
    opacity: 0.24;
  } /* Light (کمتر از دسکتاپ 0.28) */
  .hero-grid-soft {
    opacity: 0.3;
  } /* Light (کمتر از 0.34) */
  [data-theme="dark"] .hero-grid {
    opacity: 0.12;
  } /* Dark (کمتر از 0.14) */
  [data-theme="dark"] .hero-grid-soft {
    opacity: 0.16;
  } /* Dark (کمتر از 0.18) */

  /* بالای صفحه fade سبک‌تر بشه */
  [data-theme="light"] .hero-topfade {
    background: linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.22),
      rgba(255, 255, 255, 0) 26%
    );
  }
  [data-theme="dark"] .hero-topfade {
    background: linear-gradient(
      180deg,
      rgba(4, 6, 10, 0.28),
      rgba(0, 0, 0, 0) 28%
    );
  }

  /* هایلایت مرکزی کمی ضعیف‌تر تا بالای تصویر بازتر شود */
  [data-theme="light"] .hero-highlight {
    background: radial-gradient(
      circle at 50% 38%,
      rgba(255, 255, 255, 0.16),
      transparent 70%
    );
  }
  [data-theme="dark"] .hero-highlight {
    background: radial-gradient(
      circle at 50% 38%,
      rgba(255, 255, 255, 0.08),
      transparent 70%
    );
  }

  /* ماسک فید گرید در موبایل طوری که بالاتر زودتر محوتر شود */
  .grid-fade {
    -webkit-mask-image: radial-gradient(
      78% 54% at 50% 44%,
      rgba(0, 0, 0, 1) 42%,
      rgba(0, 0, 0, 0.36) 64%,
      rgba(0, 0, 0, 0) 82%
    );
    mask-image: radial-gradient(
      78% 54% at 50% 44%,
      rgba(0, 0, 0, 1) 42%,
      rgba(0, 0, 0, 0.36) 64%,
      rgba(0, 0, 0, 0) 82%
    );
  }

  /* جلوگیری از بیرون‌زدن وینیت/شدوز در موبایل (حفظ شود) */
  .hero-shadow,
  .hero-vignette {
    inset: 0 !important;
  }
}
